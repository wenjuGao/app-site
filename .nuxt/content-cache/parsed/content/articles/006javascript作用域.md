{"parsed":{"_path":"/articles/006javascript","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"javascript作用域","description":"javascript作用域","layout":"article","img":"/img/action-scope.jpg","header":"/img/action-scope-header.jpg","banner":true,"date":"2023-04-01T12:12:12.000Z","category":"javascript","tags":["作用域","上下文","变量提升","javascript"],"body":{"type":"root","children":[{"type":"element","tag":"code","props":{"className":["language-js"],"code":"function foo (a) {\n    bar()\n    var b = 2;\n    function bar () {\n        console.log('bar-b=', b)    // undefined  变量提升后还没执行赋值\n        console.log('bar-c=', c)    // undefined    变量提升后还没执行赋值\n        console.log('bar-a=', a)    // a                    a的作用域贯穿整个foo函数包括内部函数的子作用域\n        a = 'A'\n        console.log('bar-a=', a)        // A                作为参数的变量可以被再次赋值，但是开发中要尽量避免这样的操作\n    }\n    console.log('foo-b=', b)        // 2            已经执行赋值\n    console.log('foo-c=', c)        // undefined    变量提升后还没执行赋值\n    console.log('foo-a=', a)        // A                a执行过赋值操作后整个作用域的a的值都被篡改了\n    var c = 3;\n}\n// console.log('b=', b)    // throw error 未声明\n// console.log('c=', c)     // throw error  未声明\nfoo('a')\n","language":"js","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-818538"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" b "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"bar"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" () {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'bar-b='"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", b)    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// undefined  变量提升后还没执行赋值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'bar-c='"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", c)    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// undefined    变量提升后还没执行赋值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'bar-a='"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", a)    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// a                    a的作用域贯穿整个foo函数包括内部函数的子作用域\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        a "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'A'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'bar-a='"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", a)        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// A                作为参数的变量可以被再次赋值，但是开发中要尽量避免这样的操作\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'foo-b='"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", b)        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 2            已经执行赋值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'foo-c='"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", c)        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// undefined    变量提升后还没执行赋值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'foo-a='"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", a)        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// A                a执行过赋值操作后整个作用域的a的值都被篡改了\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" c "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// console.log('b=', b)    // throw error 未声明\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// console.log('c=', c)     // throw error  未声明\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'a'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"输出"}]},{"type":"element","tag":"code","props":{"className":["language-undefined"],"code":"bar-b= undefined\nbar-c= undefined\nbar-a= a        \nbar-a= A        \nfoo-b= 2        \nfoo-c= undefined\nfoo-a= A \n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bar-b= undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bar-c= undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bar-a= a        \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"bar-a= A        \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"foo-b= 2        \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"foo-c= undefined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"foo-a= A "}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"tsd"}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-391872{color:#D73A49;}\n.dark .ct-391872{color:#F97583;}\n.sepia .ct-391872{color:#66D9EF;font-style:italic;}\n.ct-248813{color:#24292E;}\n.dark .ct-248813{color:#E1E4E8;}\n.sepia .ct-248813{color:#F8F8F2;}\n.ct-118306{color:#6F42C1;}\n.dark .ct-118306{color:#B392F0;}\n.sepia .ct-118306{color:#A6E22E;}\n.ct-818538{color:#E36209;}\n.dark .ct-818538{color:#FFAB70;}\n.sepia .ct-818538{color:#FD971F;font-style:italic;}\n.ct-257789{color:#D73A49;}\n.dark .ct-257789{color:#F97583;}\n.sepia .ct-257789{color:#F92672;}\n.ct-390898{color:#005CC5;}\n.dark .ct-390898{color:#79B8FF;}\n.sepia .ct-390898{color:#AE81FF;}\n.ct-088893{color:#032F62;}\n.dark .ct-088893{color:#9ECBFF;}\n.sepia .ct-088893{color:#E6DB74;}\n.ct-080019{color:#6A737D;}\n.sepia .ct-080019{color:#88846F;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:articles:006javascript作用域.md","_source":"content","_file":"articles/006javascript作用域.md","_extension":"md"},"hash":"4HrxtUGDyn"}