{"parsed":{"_path":"/articles/000javascriptes6amdcmdcommonjs","_dir":"articles","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"ES5 模块化之 AMD、CMD、CommonJs 区别","description":"异步加载 JS 文件，按照模块加载方法，通过 define()函数定义，第一个参数是一个数组，里面定义一些需要依赖的包，第二个参数是一个回调函数，通过变量来引用模块里面的方法，最后通过 return 来输出","layout":"article","img":"/img/js-module.jpg","header":"/img/js-module-header.jpg","banner":true,"date":"2023-04-04T12:12:12.000Z","category":"javascript","tags":["模块化","AMD","CMD","CommonJs","EMS","javascript"],"body":{"type":"root","children":[{"type":"element","tag":"h4","props":{"id":"_1-amd-requirejs依赖前置异步定义"},"children":[{"type":"text","value":"1. AMD — RequireJS：依赖前置、异步定义"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"AMD 是 RequireJS 在推广过程中对模块定义的规范化产出。\nRequireJS：异步加载 JS 文件，按照模块加载方法，通过 define()函数定义，第一个参数是一个数组，里面定义一些需要依赖的包，第二个参数是一个回调函数，通过变量来引用模块里面的方法，最后通过 return 来输出。\nAMD 的规范是一个依赖前置，当需要使用别的模块时，在程序前做好引用，在引用成功的回调里面加载需要执行的程序。"}]},{"type":"element","tag":"code","props":{"className":["language-js"],"code":"define(['package/lib'], function(lib) {\n  function test() {\n    lib.fn()\n  }\n  return test\n})\n","language":"js","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"define"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(["}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'package/lib'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"], "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-818538"},"children":[{"type":"text","value":"lib"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"() {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    lib."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"fn"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" test\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"_2-cmd-seajs依赖就近同步定义"},"children":[{"type":"text","value":"2. CMD — SeaJS：依赖就近、同步定义"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"CMD 是 SeaJS 在推广过程中对模块定义的规范化产出。\nSeaJS：同步模块定义，是淘宝团队提供的一个模块开发的 js 框架（不更新）。define()定义，通过 require 加依赖插件，即用即返。"}]},{"type":"element","tag":"code","props":{"className":["language-js"],"code":"define(function(require, exports, module) {\n  var $ = require('jquery')\n  exports.test = function() {}\n})\n","language":"js","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"define"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-818538"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-818538"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-818538"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" $ "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'jquery'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"() {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"_3-commonjs-规范"},"children":[{"type":"text","value":"3. CommonJS 规范"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"CommonJS 规范是通过 module.exports 定义的，另外浏览器端是不识别 module.exports 的。\nCommonJS 输出方式有 2 种：默认输出 module export 和 exports.XX"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Nodejs 端是使用 CommonJS 规范的；"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"前端浏览器一般使用 AMD、CMD、ES6 等定义模块化开发的；"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"a.js"}]},{"type":"element","tag":"code","props":{"className":["language-js"],"code":"exports.test = function() {}\n","language":"js","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"() {}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"b.js"}]},{"type":"element","tag":"code","props":{"className":["language-js"],"code":"var test = require('a.js')\n","language":"js","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"var"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" test "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'a.js'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"es6-模块化"},"children":[{"type":"text","value":"ES6 模块化"}]},{"type":"element","tag":"h4","props":{"id":"exportimport"},"children":[{"type":"text","value":"export/import"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"export default / export"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"export default 默认导出一个 ， import xx from xxx"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"export 批量导出，导出多个, import { xxx } from xxx"}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-118306{color:#6F42C1;}\n.dark .ct-118306{color:#B392F0;}\n.sepia .ct-118306{color:#A6E22E;}\n.ct-248813{color:#24292E;}\n.dark .ct-248813{color:#E1E4E8;}\n.sepia .ct-248813{color:#F8F8F2;}\n.ct-088893{color:#032F62;}\n.dark .ct-088893{color:#9ECBFF;}\n.sepia .ct-088893{color:#E6DB74;}\n.ct-391872{color:#D73A49;}\n.dark .ct-391872{color:#F97583;}\n.sepia .ct-391872{color:#66D9EF;font-style:italic;}\n.ct-818538{color:#E36209;}\n.dark .ct-818538{color:#FFAB70;}\n.sepia .ct-818538{color:#FD971F;font-style:italic;}\n.ct-257789{color:#D73A49;}\n.dark .ct-257789{color:#F97583;}\n.sepia .ct-257789{color:#F92672;}\n.ct-667354{color:#005CC5;}\n.dark .ct-667354{color:#79B8FF;}\n.sepia .ct-667354{color:#66D9EF;font-style:italic;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"es6-模块化","depth":3,"text":"ES6 模块化"}]}},"_type":"markdown","_id":"content:articles:000javascript模块化之ES6,AMD,CMD,commonJS.md","_source":"content","_file":"articles/000javascript模块化之ES6,AMD,CMD,commonJS.md","_extension":"md"},"hash":"J2sPvcwDjf"}